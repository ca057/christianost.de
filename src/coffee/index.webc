<!doctype html>

<html lang="en">
  <head>
    <title @text="coffees.images.length + ' coffees'"></title>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- TODO: favicon! -->

    <!-- critical css references -->
    <link rel="stylesheet" href="../_includes/css-reset.css" />
    <!-- critical css bundle -->
    <style @raw="getBundle('css')" webc:keep></style>
    <!-- TODO: process the shit out of this CSS -->
    <style webc:keep>
      @font-face {
        font-family: "Knewave";
        font-display: swap;
        src: url("/fonts/knewave.woff");
      }
      :root {
        --spacing-1: 1rem;
        --spacing-2: 2rem;
        --spacing-3: 3rem;
        --spacing-4: 4rem;
      }
      html,
      body {
        height: 100%;
        font-family:
          system-ui,
          -apple-system,
          BlinkMacSystemFont,
          "Segoe UI",
          Roboto,
          Oxygen,
          Ubuntu,
          Cantarell,
          "Open Sans",
          "Helvetica Neue",
          sans-serif;
      }
      body {
        padding: var(--spacing-1);
        background-color: #fffdf6;
        color: #040404;
      }

      h1 {
        font-family: Knewave;
        font-weight: normal;
        font-size: clamp(1.5rem, -0.875rem + 8.333vw, 4rem);
        margin:
          clamp(var(--spacing-2), -0.875rem + 8.333vw, var(--spacing-4))
          var(--spacing-1)
          clamp(var(--spacing-2), -0.875rem + 8.333vw, var(--spacing-3))
        ;
      }
      h1 span.numeric {
        font-size: 2em;
      }

      p {
        font-family: Charter, Bitstream Charter, serif;
        margin-bottom: 0.5rem;
      }
      p.info {
        font-family: serif;
        font-style: italic;
      }
      p.footnote {
        font-size: 0.8rem;
        color: #04040455;
      }

      main {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(min(max(50px, 25%), 300px), 1fr));
        grid-gap: var(--spacing-1);
        margin: 1rem auto;
      }
      main img {
        width: 100%;
        height: 100%;
        aspect-ratio: 1 / 1;
        border-radius: calc(var(--spacing-1) / 2);
        overflow: hidden;
      }

      footer {
        text-align: center;
        margin: var(--spacing-2);
      }
    </style>
  </head>
  <body>
    <header>
      <h1><span class="numeric" @text="coffees.images.length"></span> coffees</h1>
    </header>
    <main>
        <img
          webc:for="(coffee, index) of coffees.images"
          :id="coffee.id"
          :style="`background:${blurhashColorRgb(coffee.images.blurhash)};`"
          alt=""
          :src="`https://coffeedn.christianost.de/${coffee.images['300']}`"
          width="300"
          height="300"
          loading="lazy"
          decoding="async"
        >
        </img>
    </main>
    <footer>
      <p class="info">
        A picture of every coffee I drank between <span @text="formatDate(coffees.images[0].day)"></span> and <span @text="formatDate(coffees.images[coffees.images.length-1].day)"></span>.
      </p>
      <p class="info footnote">by <a href="/">Christian Ost</a> â€“ last updated on <span @text="formatDate(coffees.createdAt.split('T')[0])"></span></p>
    </footer>
  </body>
</html>
