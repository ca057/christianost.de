<!doctype html>

<html lang="en">
  <head>
    <title @text="coffees.length + ' coffees'"></title>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- critical css references -->
    <link rel="stylesheet" href="../_includes/css-reset.css" />
    <!-- critical css bundle -->
    <style @raw="getBundle('css')" webc:keep></style>
    <!-- TODO: process the shit out of this CSS -->
    <style webc:keep>
      @font-face {
        font-family: "DepartureMono";
        font-display: swap;
        src: url("/fonts/DepartureMono.woff2") format("woff2");
      }
      @font-face {
        font-family: "Knewave";
        font-display: swap;
        src: url("/fonts/knewave.woff");
      }
      :root {
        --spacing-1: 12px;
      }
      html,
      body {
        height: 100%;
        font-family:
          "Inter",
          system-ui,
          -apple-system,
          BlinkMacSystemFont,
          "Segoe UI",
          Roboto,
          Oxygen,
          Ubuntu,
          Cantarell,
          "Open Sans",
          "Helvetica Neue",
          sans-serif;
      }
      body {
        padding: var(--spacing-1);
        background-color: #fffdf6;
        color: #040404;
      }

      h1 {
        font-family: Knewave;
        font-weight: normal;
        font-size: clamp(1.5rem, -0.875rem + 8.333vw, 4rem);
        margin: clamp(3rem, -0.875rem + 8.333vw, 4rem) 1rem 1rem;
      }
      h1 span.numeric {
        font-size: 2em;
      }

      p {
        font-size: 1.2rem;
        margin-bottom: 1.2rem;
      }
      p.info {
        font-family: serif;
        font-size: clamp(0.75rem, -0.875rem + 4.333vw, 1rem);
        font-style: italic;
      }
      p.ta-right {
        text-align: right;
      }

      .coffees {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(min(max(150px, 25%), 300px), 1fr));
        grid-gap: var(--spacing-1);
        margin: 1rem auto;
      }
      .coffees img {
        width: 100%;
        height: 100%;
        aspect-ratio: 1 / 1;
        border-radius: calc(var(--spacing-1) / 2);
        overflow: hidden;
      }

      footer {
        text-align: center;
      }
    </style>
  </head>
  <body>
    <header>
      <h1><span class="numeric" @text="coffees.length"></span> coffees</h1>
    </header>
    <main>
      <p class="info ta-right">
        A picture of every coffee I drank since <span @text="formatDate(coffees[0].day)"></span>.
      </p>
      <div class="coffees">
        <img
          webc:for="(coffee, index) of coffees"
          :id="coffee.id"
          :style="`background:${blurhashColorRgb(coffee.images.blurhash)};`"
          alt=""
          :src="`images/${coffee.images['300']}`"
          width="300"
          height="300"
          loading="lazy"
          decoding="async"
        >
        </img>
      </div>
    </main>
    <footer>
      <p class="info">by <a href="/">Christian Ost</a> â€“ last updated at <span @text="formatDate(Date.now())"></span></p>
    </footer>
  </body>
</html>
